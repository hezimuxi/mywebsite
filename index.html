<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>心率检测报警</title>
  <style>
    body { background: #e9fafe; min-height: 100vh; display: flex; align-items: center; justify-content: center;}
    .mainbox { background: #fff; border-radius: 16px; box-shadow:0 0 18px #bdc; padding: 50px 35px; width: 340px; text-align: center;}
    .btn { padding: 12px 34px; border: none; background: linear-gradient(93deg,#60efbc,#58d5c9,#7766e6);
      border-radius: 22px; color: #fff; font-size: 20px; font-weight: 600; cursor: pointer; margin-top:25px;}
    .hr { font-size: 62px; color: #e74c3c; margin: 35px 0 20px;}
    .alert { font-size:22px; color:#d32f2f; font-weight: bold;}
    .msg { color:#555; font-size: 16px;}
  </style>
</head>

<body>
<div class="mainbox">
  <h2>心率检测报警</h2>
  <div class="hr" id="hr">--</div>
  <div id="msg" class="msg">点击下方按钮获取心率</div>
  <div id="alertArea"></div>
  <button class="btn" onclick="getHeartRate()">测心率</button>
  <audio id="buzzer" src="music/buzz.mp3"></audio>
</div>

<script>
function getHeartRate() {
  document.getElementById('msg').textContent = "正在获取心率...";
  document.getElementById('hr').textContent = "--";
  document.getElementById('alertArea').textContent = "";

  // 模拟延时 + 心率
  setTimeout(() => {
    const hr = Math.floor(Math.random() * 40) + 60; // 60~100
    document.getElementById('hr').textContent = hr;
    document.getElementById('msg').textContent = "测量完成";

    if (hr >= 95 || hr <= 60) {
      showAlert('心率异常');
      playBuzzNTimes(5);
    }
  }, 1200);
}

function showAlert(text) {
  document.getElementById('alertArea').innerHTML =
    `<div class="alert">${text}</div>`;
}

function playBuzzNTimes(n) {
  const audio = document.getElementById('buzzer');
  let count = 0;
  audio.currentTime = 0;
  audio.play();

  audio.onended = () => {
    count++;
    if (count < n) {
      audio.currentTime = 0;
      audio.play();
    }
  };
}
</script>
</body>
</html>
